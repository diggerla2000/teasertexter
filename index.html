<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Layer mit editierbarem Charakter</title>
    <style>
        canvas {
            position: absolute;
            top: 0;
            left: 0;
        }
        .controls {
            position: relative;
            margin-top: 520px;
        }
    </style>
</head>
<body>
    <!-- Layer 1: Hintergrund -->
    <canvas id="background-layer" width="500" height="500"></canvas>
    
    <!-- Layer 2: Charakter -->
    <canvas id="character-layer" width="500" height="500"></canvas>

    <!-- Layer 3: Effekte -->
    <canvas id="effect-layer" width="500" height="500"></canvas>

    <!-- Steuerungselemente -->
    <div class="controls">
        <!-- Steuerung mit Buttons -->
        <button id="startCharacter">Start Character</button>
        <button id="stopCharacter">Stop Character</button>
        <button id="toggleEffect">Toggle Effect</button>
        
        <!-- Steuerung mit Slider -->
        <label for="speedSlider">Charakter-Geschwindigkeit: </label>
        <input type="range" id="speedSlider" min="1" max="10" value="2">

        <!-- Steuerung mit Checkboxen -->
        <label>
            <input type="checkbox" id="toggleBackground" checked>
            Hintergrund anzeigen
        </label>
        <label>
            <input type="checkbox" id="toggleCharacter" checked>
            Charakter anzeigen
        </label>

        <!-- Dropdown Menü zum Wechseln der Templates -->
        <div style="margin-top: 20px;">
            <label for="templateSelector">Wähle ein Template: </label>
            <select id="templateSelector">
                <option value="template1">Template 1</option>
                <option value="template2">Template 2</option>
            </select>
        </div>

        <!-- Textfelder für die Buchstaben der Animationen -->
        <div style="margin-top: 20px;">
            <label for="char1">Buchstabe 1: </label>
            <input type="text" id="char1" maxlength="1" value="a">
            <label for="char2">Buchstabe 2: </label>
            <input type="text" id="char2" maxlength="1" value="b">
            <label for="char3">Buchstabe 3: </label>
            <input type="text" id="char3" maxlength="1" value="c">
            <label for="char4">Buchstabe 4: </label>
            <input type="text" id="char4" maxlength="1" value="d">
        </div>
    </div>

    <script>
        var backgroundCanvas = document.getElementById('background-layer').getContext('2d');
        var characterCanvas = document.getElementById('character-layer').getContext('2d');
        var effectCanvas = document.getElementById('effect-layer').getContext('2d');

        // Globale Variablen für die Animationen und Effekte
        var charX = 0;
        var charAnimation;
        var speed = 2;
        var effectVisible = true;
        var effectRunning = true;
        var template1Active = true;
        var template2Active = false;

        // Buchstaben, die für den Charakter verwendet werden
        var char1 = 'a';
        var char2 = 'b';
        var char3 = 'c';
        var char4 = 'd';

        // Template 1: Charakter-Animation mit Buchstaben
        function animateCharacter1() {
            if (!template1Active) return;
            characterCanvas.clearRect(0, 0, 500, 500);

            characterCanvas.font = "50px Arial";
            characterCanvas.fillStyle = "green";
            
            // Zeichne die Buchstaben in Positionen
            characterCanvas.fillText(char1, charX, 200);
            characterCanvas.fillText(char2, charX + 60, 200);
            characterCanvas.fillText(char3, charX + 120, 200);
            characterCanvas.fillText(char4, charX + 180, 200);

            charX += speed;
            if (charX > 500) charX = 0;
            charAnimation = requestAnimationFrame(animateCharacter1);
        }

        // Template 2: Charakter-Animation mit Buchstaben
        function animateCharacter2() {
            if (!template2Active) return;
            characterCanvas.clearRect(0, 0, 500, 500);

            characterCanvas.font = "50px Arial";
            characterCanvas.fillStyle = "blue";

            // Zeichne die Buchstaben in einer anderen Position
            characterCanvas.fillText(char1, charX, 250);
            characterCanvas.fillText(char2, charX + 60, 250);
            characterCanvas.fillText(char3, charX + 120, 250);
            characterCanvas.fillText(char4, charX + 180, 250);

            charX += speed;
            if (charX > 500) charX = 0;
            charAnimation = requestAnimationFrame(animateCharacter2);
        }

        // Event-Listener für die Buchstaben-Textfelder
        document.getElementById("char1").addEventListener("input", function() {
            char1 = this.value || 'a';
        });

        document.getElementById("char2").addEventListener("input", function() {
            char2 = this.value || 'b';
        });

        document.getElementById("char3").addEventListener("input", function() {
            char3 = this.value || 'c';
        });

        document.getElementById("char4").addEventListener("input", function() {
            char4 = this.value || 'd';
        });

        // Template 1 starten
        function startTemplate1() {
            cancelAnimationFrame(charAnimation); // Stoppt die laufende Animation
            charX = 0; // Charakter-Position zurücksetzen
            template1Active = true;
            template2Active = false;
            animateCharacter1();
        }

        // Template 2 starten
        function startTemplate2() {
            cancelAnimationFrame(charAnimation); // Stoppt die laufende Animation
            charX = 0; // Charakter-Position zurücksetzen
            template1Active = false;
            template2Active = true;
            animateCharacter2();
        }

        // Eventlistener für das Dropdown-Menü
        document.getElementById("templateSelector").addEventListener("change", function(event) {
            if (event.target.value === "template1") {
                startTemplate1();
            } else if (event.target.value === "template2") {
                startTemplate2();
            }
        });

        // Buttons: Charakter starten und stoppen
        document.getElementById("startCharacter").addEventListener("click", function() {
            if (template1Active) {
                startTemplate1();
            } else if (template2Active) {
                startTemplate2();
            }
        });

        document.getElementById("stopCharacter").addEventListener("click", function() {
            cancelAnimationFrame(charAnimation); // Stoppt die aktuelle Animation
        });

        // Buttons: Effekt ein- oder ausschalten
        document.getElementById("toggleEffect").addEventListener("click", function() {
            effectRunning = !effectRunning;
        });

        // Slider: Geschwindigkeit des Charakters anpassen
        document.getElementById("speedSlider").addEventListener("input", function() {
            speed = parseInt(this.value);
        });

        // Checkbox: Hintergrund-Layer ein- oder ausschalten
        document.getElementById("toggleBackground").addEventListener("change", function() {
            document.getElementById("background-layer").style.display = this.checked ? 'block' : 'none';
        });

        // Checkbox: Charakter-Layer ein- oder ausschalten
        document.getElementById("toggleCharacter").addEventListener("change", function() {
            document.getElementById("character-layer").style.display = this.checked ? 'block' : 'none';
        });

        // Starte das erste Template standardmäßig
        startTemplate1();
    </script>
</body>
</html>